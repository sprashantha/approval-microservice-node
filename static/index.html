
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Concur Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="bootstrap/dist/css/bootstrap-theme.min.css">
  <link rel="stylesheet"
        href="typeahead.js-bootstrap.css/typeahead.js-bootstrap.css">
  <link rel="stylesheet" href="app.css">

</head>
<body class="container">
  
  <h1>Concur</h1>
  
  <p class="lead">Welcome to Concur!</p>
  
  <div ng-app="" ng-controller="homeController">
      <h2>Upcoming Trips ({{home.trips.length}})</h2>
      <table>
          <thead>
          <tr>
              <th>Trip Name</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Record Locator</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="t in home.trips">
              <td>{{ t.TripName }}</td>
              <td>{{ t.StartDateLocal }}</td>
              <td>{{ t.EndDateLocal }}</td>
              <td>{{ t.RecordLocator }}</td>
          </tr>
          </tbody>
      </table>

      <h2>Unsubmitted Reports ({{home.reports.Items.length}})</h2>
      <table>
          <thead>
          <tr>
              <th>Report Name</th>
              <th>Status</th>
              <th>Payment Status</th>
              <th>Report Date</th>
              <th>Requested Amount</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="r in home.reports.Items">
              <td>{{ r.Name }}</td>
              <td>{{ r.ApprovalStatusName }}</td>
              <td>{{ r.PaymentStatusName }}</td>
              <td>{{ r.CreateDate }}</td>
              <td>{{ r.Total | currency }}</td>
          </tr>
          </tbody>
      </table>

      <h2>Pending Approvals ({{home.approvals.Items.length}})</h2>
      <table>
          <thead>
          <tr>
              <th>Report Name</th>
              <th>Employee</th>
              <th>Report Date</th>
              <th>Requested Amount</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="a in home.approvals.Items">
              <td>{{ a.Name }}</td>
              <td>{{ a.OwnerName }}</td>
              <td>{{ a.SubmitDate }}</td>
              <td>{{ a.Total | currency }}</td>
          </tr>
          </tbody>
      </table>
  </div>

  <script src="jquery/jquery.min.js"></script>
  <script src="bootstrap/dist/js/bootstrap.min.js"></script>
  <script src = "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>

  <script>
      function homeController($scope,$http) {
          $http.get("/concur/api/home")
                  .success(function(response) {$scope.home = response;});
      }
  </script>
</body>
</html>
